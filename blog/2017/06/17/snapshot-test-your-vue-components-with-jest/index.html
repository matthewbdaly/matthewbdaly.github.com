<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="theme-color" content="#252525"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"><meta name="description" content="I&#x27;m a web developer in Norfolk. This is my blog..."><meta name="keywords" content="vue,jest,testing,javascript,tdd"><link rel="amphtml" href="https://matthewdaly.co.uk/blog/2017/06/17/snapshot-test-your-vue-components-with-jest/amp/"><link rel="canonical" href="https://matthewdaly.co.uk/blog/2017/06/17/snapshot-test-your-vue-components-with-jest/"><link href="/opensearch.xml" rel="search" title="Matthew Daly's Blog Search" type="application/opensearchdescription+xml"><link href="/favicon.ico" rel="icon"><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" type="text/css" href="/static/css/style.min.css" media="all"><link rel="alternate" type="application/rss+xml" title="Matthew Daly&#x27;s Blog - feed" href="/rss.xml"><link rel="alternate" type="application/atom+xml" title="Matthew Daly&#x27;s Blog - feed" href="/atom.xml"><link rel="pingback" href="https://webmention.io/matthewdaly.co.uk/xmlrpc"><link rel="webmention" href="https://webmention.io/matthewdaly.co.uk/webmention"><title>Snapshot Test Your Vue Components With Jest - Matthew Daly&#x27;s Blog</title></head><body><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=MattBD" async="async"></script><header><div class="container headercontainer"><div class="jumbotron"><h1><a href="/">Matthew Daly&#x27;s Blog</a></h1><h2>I&#x27;m a web developer in Norfolk. This is my blog...</h2></div></div><div class="container headercontainer"><nav class="navbar navbar-inverse navbar-static-top"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#header-nav"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="header-nav"><ul class="nav navbar-nav"><li><a href="/">Home</a></li><li><a href="/blog/archives/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">RSS</a></li></ul><form action="https://www.google.com/search" method="GET" name="searchForm" id="searchForm" enctype="application/x-www-form-urlencoded" class="navbar-form navbar-right"><div class="form-group"><input type="hidden" id="sitesearch" value="matthewdaly.co.uk"> <input id="search" type="search" name="q" placeholder="Search..." maxlength="200" autocomplete="off" class="form-control"><ul class="searchresults"></ul></div></form></div></div></nav></div></header><div id="mainbody" class="container"><div class="row"><div class="col-md-8"><article class="post"><p class="date">17th June 2017 2:12 pm</p><h1>Snapshot Test Your Vue Components With Jest</h1><p>At work I’ve recently started using <a href="https://vuejs.org/">Vue</a> as my main front-end framework instead of Angular 1. It has a relatively shallow learning curve and has enough similarities with both React and Angular 1 that if you’re familiar with one or both of them it feels quite familiar. We’re a Laravel shop and Laravel comes out of the box with a basic scaffolding for using Vue, so not only is it the path of least resistance, but many of my colleagues knew it already and it’s used on some existing projects (one of which I’ve been helping out on this week), so it made sense to learn it. Add to that the fact that the main alternative is Angular 2, which I vehemently dislike, and learning Vue was a no-brainer.</p><p><a href="https://facebook.github.io/jest/docs/snapshot-testing.html">Snapshot tests</a> are a really useful way of making sure your user interface doesn’t change unexpectedly. Facebook introduced them to their Jest testing framework last year, and they’ve started to appear in other testing frameworks too. In their words…</p><blockquote><p>A typical snapshot test case for a mobile app renders a UI component, takes a screenshot, then compares it to a reference image stored alongside the test. The test will fail if the two images do not match: either the change is unexpected, or the screenshot needs to be updated to the new version of the UI component.</p></blockquote><p>This makes it easy to make sure than a UI component, such as a React or Vue component, does not unexpectedly change how it is rendered. In the event that it does change, it will fail the test, and it’s up to the developer to confirm whether or not that’s expected - if so they can generate a new version of the snapshot and be on their way. Without it, you’re stuck manually testing that the right HTML tags get generated, which is a chore.</p><p>Jest’s documentation is aimed pretty squarely at React, but it’s not hard to adapt it to work with Vue components. Here I’ll show you how I got it working with Vue.</p><h2 id="setting-up-a-new-project">Setting up a new project</h2><p>I used the <a href="https://github.com/vuejs/vue-cli">Vue CLI</a> boilerplate generator to set up my initial dependencies for this project. I then had to install some further packages:</p><pre><code class="hljs lang-bash singleline">$ npm install --save-dev jest babel-jest jest-vue-preprocessor</code></pre><p>After that, I had to configure Jest to work with Vue. The finished <code>package.json</code> looked like this:</p><pre><code class="hljs lang-json"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>{</td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td>  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"myproject"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A project"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td>  <span class="hljs-attr">"author"</span>: <span class="hljs-string">"Matthew Daly &lt;matthew@matthewdaly.co.uk&gt;"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td>  <span class="hljs-attr">"private"</span>: <span class="hljs-literal">true</span>,</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  <span class="hljs-attr">"scripts"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td>    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"node build/dev-server.js"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    <span class="hljs-attr">"start"</span>: <span class="hljs-string">"node build/dev-server.js"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td>    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"node build/build.js"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>    <span class="hljs-attr">"lint"</span>: <span class="hljs-string">"eslint --ext .js,.vue src"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"jest __test__/ --coverage"</span></td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>  },</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>  <span class="hljs-attr">"dependencies"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>    <span class="hljs-attr">"vue"</span>: <span class="hljs-string">"^2.3.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>    <span class="hljs-attr">"vue-router"</span>: <span class="hljs-string">"^2.3.1"</span></td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>  },</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>  <span class="hljs-attr">"devDependencies"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>    <span class="hljs-attr">"autoprefixer"</span>: <span class="hljs-string">"^6.7.2"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td>    <span class="hljs-attr">"babel-core"</span>: <span class="hljs-string">"^6.22.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>    <span class="hljs-attr">"babel-eslint"</span>: <span class="hljs-string">"^7.1.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td>    <span class="hljs-attr">"babel-jest"</span>: <span class="hljs-string">"^20.0.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td>    <span class="hljs-attr">"babel-loader"</span>: <span class="hljs-string">"^6.2.10"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td>    <span class="hljs-attr">"babel-plugin-transform-runtime"</span>: <span class="hljs-string">"^6.22.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td>    <span class="hljs-attr">"babel-preset-env"</span>: <span class="hljs-string">"^1.3.2"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>    <span class="hljs-attr">"babel-preset-stage-2"</span>: <span class="hljs-string">"^6.22.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="27"></td><td>    <span class="hljs-attr">"babel-register"</span>: <span class="hljs-string">"^6.22.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="28"></td><td>    <span class="hljs-attr">"chalk"</span>: <span class="hljs-string">"^1.1.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="29"></td><td>    <span class="hljs-attr">"connect-history-api-fallback"</span>: <span class="hljs-string">"^1.3.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="30"></td><td>    <span class="hljs-attr">"copy-webpack-plugin"</span>: <span class="hljs-string">"^4.0.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="31"></td><td>    <span class="hljs-attr">"css-loader"</span>: <span class="hljs-string">"^0.28.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="32"></td><td>    <span class="hljs-attr">"eslint"</span>: <span class="hljs-string">"^3.19.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="33"></td><td>    <span class="hljs-attr">"eslint-config-standard"</span>: <span class="hljs-string">"^6.2.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="34"></td><td>    <span class="hljs-attr">"eslint-friendly-formatter"</span>: <span class="hljs-string">"^2.0.7"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="35"></td><td>    <span class="hljs-attr">"eslint-loader"</span>: <span class="hljs-string">"^1.7.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="36"></td><td>    <span class="hljs-attr">"eslint-plugin-html"</span>: <span class="hljs-string">"^2.0.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="37"></td><td>    <span class="hljs-attr">"eslint-plugin-promise"</span>: <span class="hljs-string">"^3.4.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="38"></td><td>    <span class="hljs-attr">"eslint-plugin-standard"</span>: <span class="hljs-string">"^2.0.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="39"></td><td>    <span class="hljs-attr">"eventsource-polyfill"</span>: <span class="hljs-string">"^0.9.6"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="40"></td><td>    <span class="hljs-attr">"express"</span>: <span class="hljs-string">"^4.14.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="41"></td><td>    <span class="hljs-attr">"extract-text-webpack-plugin"</span>: <span class="hljs-string">"^2.0.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="42"></td><td>    <span class="hljs-attr">"file-loader"</span>: <span class="hljs-string">"^0.11.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="43"></td><td>    <span class="hljs-attr">"friendly-errors-webpack-plugin"</span>: <span class="hljs-string">"^1.1.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="44"></td><td>    <span class="hljs-attr">"html-webpack-plugin"</span>: <span class="hljs-string">"^2.28.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="45"></td><td>    <span class="hljs-attr">"http-proxy-middleware"</span>: <span class="hljs-string">"^0.17.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="46"></td><td>    <span class="hljs-attr">"jest"</span>: <span class="hljs-string">"^20.0.4"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="47"></td><td>    <span class="hljs-attr">"jest-vue-preprocessor"</span>: <span class="hljs-string">"^1.0.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="48"></td><td>    <span class="hljs-attr">"opn"</span>: <span class="hljs-string">"^4.0.2"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="49"></td><td>    <span class="hljs-attr">"optimize-css-assets-webpack-plugin"</span>: <span class="hljs-string">"^1.3.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="50"></td><td>    <span class="hljs-attr">"ora"</span>: <span class="hljs-string">"^1.2.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="51"></td><td>    <span class="hljs-attr">"rimraf"</span>: <span class="hljs-string">"^2.6.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="52"></td><td>    <span class="hljs-attr">"semver"</span>: <span class="hljs-string">"^5.3.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="53"></td><td>    <span class="hljs-attr">"shelljs"</span>: <span class="hljs-string">"^0.7.6"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="54"></td><td>    <span class="hljs-attr">"url-loader"</span>: <span class="hljs-string">"^0.5.8"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="55"></td><td>    <span class="hljs-attr">"vue-loader"</span>: <span class="hljs-string">"^12.1.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="56"></td><td>    <span class="hljs-attr">"vue-style-loader"</span>: <span class="hljs-string">"^3.0.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="57"></td><td>    <span class="hljs-attr">"vue-template-compiler"</span>: <span class="hljs-string">"^2.3.3"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="58"></td><td>    <span class="hljs-attr">"webpack"</span>: <span class="hljs-string">"^2.6.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="59"></td><td>    <span class="hljs-attr">"webpack-bundle-analyzer"</span>: <span class="hljs-string">"^2.2.1"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="60"></td><td>    <span class="hljs-attr">"webpack-dev-middleware"</span>: <span class="hljs-string">"^1.10.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="61"></td><td>    <span class="hljs-attr">"webpack-hot-middleware"</span>: <span class="hljs-string">"^2.18.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="62"></td><td>    <span class="hljs-attr">"webpack-merge"</span>: <span class="hljs-string">"^4.1.0"</span></td></tr><tr><td class="linenos" data-pseudo-content="63"></td><td>  },</td></tr><tr><td class="linenos" data-pseudo-content="64"></td><td>  <span class="hljs-attr">"engines"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="65"></td><td>    <span class="hljs-attr">"node"</span>: <span class="hljs-string">"&gt;= 4.0.0"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="66"></td><td>    <span class="hljs-attr">"npm"</span>: <span class="hljs-string">"&gt;= 3.0.0"</span></td></tr><tr><td class="linenos" data-pseudo-content="67"></td><td>  },</td></tr><tr><td class="linenos" data-pseudo-content="68"></td><td>  <span class="hljs-attr">"browserslist"</span>: [</td></tr><tr><td class="linenos" data-pseudo-content="69"></td><td>    <span class="hljs-string">"&gt; 1%"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="70"></td><td>    <span class="hljs-string">"last 2 versions"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="71"></td><td>    <span class="hljs-string">"not ie &lt;= 8"</span></td></tr><tr><td class="linenos" data-pseudo-content="72"></td><td>  ],</td></tr><tr><td class="linenos" data-pseudo-content="73"></td><td>  <span class="hljs-attr">"jest"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="74"></td><td>    <span class="hljs-attr">"testRegex"</span>: <span class="hljs-string">"spec.js$"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="75"></td><td>    <span class="hljs-attr">"moduleFileExtensions"</span>: [</td></tr><tr><td class="linenos" data-pseudo-content="76"></td><td>      <span class="hljs-string">"js"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="77"></td><td>      <span class="hljs-string">"vue"</span></td></tr><tr><td class="linenos" data-pseudo-content="78"></td><td>    ],</td></tr><tr><td class="linenos" data-pseudo-content="79"></td><td>    <span class="hljs-attr">"transform"</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="80"></td><td>      <span class="hljs-attr">"^.+\\.js$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/node_modules/babel-jest"</span>,</td></tr><tr><td class="linenos" data-pseudo-content="81"></td><td>      <span class="hljs-attr">".*\\.(vue)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/node_modules/jest-vue-preprocessor"</span></td></tr><tr><td class="linenos" data-pseudo-content="82"></td><td>    }</td></tr><tr><td class="linenos" data-pseudo-content="83"></td><td>  }</td></tr><tr><td class="linenos" data-pseudo-content="84"></td><td>}</td></tr></table></code></pre><p>I won’t include things like the Webpack config, because that’s all generated by Vue CLI. Note that we need to tell Jest what file extensions it should work with, including <code>.vue</code>, and we need to specify the appropriate transforms for different types of files. We use <code>jest-vue-preprocessor</code> for <code>.vue</code> files and <code>babel-jest</code> for <code>.js</code> files.</p><p>With that done, we can create a basic component. We’ll assume we’re writing a simple issue tracker here, and our first component will be at <code>src/components/Issue.vue</code>:</p><pre><code class="hljs lang-html"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>An Issue<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>  data () {</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td>    <span class="hljs-keyword">return</span> {}</td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>  }</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>}</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="undefined"></span></td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></td></tr></table></code></pre><p>Next, we create a simple test for this component. Save this as <code>__test__/components/issue.spec.js</code>:</p><pre><code class="hljs lang-javascript"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-keyword">import</span> Issue <span class="hljs-keyword">from</span> <span class="hljs-string">'../../src/components/Issue.vue'</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-keyword">const</span> Constructor = Vue.extend(Issue)</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Constructor().$mount()</td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>describe(<span class="hljs-string">'Issue'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td>  it(<span class="hljs-string">'should render'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    expect(vm.$el.querySelector(<span class="hljs-string">'h1'</span>).textContent).toEqual(<span class="hljs-string">'An Issue'</span>)</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td>  });</td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>  it(<span class="hljs-string">'should match the snapshot'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>    expect(vm.$el).toMatchSnapshot()</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>  });</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>});</td></tr></table></code></pre><p><code>Constructor</code> is what creates our Vue component, while <code>vm</code> is our actual newly-mounted Vue component. We can refer to the HTML inside the component through <code>vm.$el</code>, so we can then work with the virtual DOM easily.</p><p>In the first test we use the more traditional method of verifying our UI component has worked as expected - we fetch an HTML tag inside it and verify that the content inside is what we expect. This is fine for a small component, but as the components get larger we’ll find it more of a chore.</p><p>The second test is much simpler and more concise. We simply assert that it matches the snapshot. Not only is that easier, but it can scale to components of any size because we don’t have to check every little element.</p><p>Let’s run our tests:</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ npm <span class="hljs-built_in">test</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>&gt; myproject@1.0.0 <span class="hljs-built_in">test</span> /home/matthew/Projects/myproject</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>&gt; jest __test__/ --coverage</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td> PASS  __test__/components/issue.spec.js</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  Issue</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td>    ✓ should render (46ms)</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    ✓ should match the snapshot (14ms)</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>Snapshot Summary</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td> › 1 snapshot written <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite.</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>Test Suites: 1 passed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>Tests:       2 passed, 2 total</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>Snapshots:   1 added, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>Time:        8.264s</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>Ran all <span class="hljs-built_in">test</span> suites matching <span class="hljs-string">"__test__/"</span>.</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td>File                                                       |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |</td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td>All files                                                  |    96.15 |       50 |      100 |       96 |                |</td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td> root                                                      |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td>  unknown                                                  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td> root/home/matthew/Projects/myproject/__test__/components  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>  issue.spec.js                                            |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="27"></td><td> root/home/matthew/Projects/myproject/src/components       |    94.44 |       50 |      100 |    94.12 |                |</td></tr><tr><td class="linenos" data-pseudo-content="28"></td><td>  Issue.vue                                                |    94.44 |       50 |      100 |    94.12 |             39 |</td></tr><tr><td class="linenos" data-pseudo-content="29"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr></table></code></pre><p>Note this section:</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>Snapshot Summary</td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td> › 1 snapshot written <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite.</td></tr></table></code></pre><p>This tells us that the snapshot has been successfully written. If we run the tests again we should see that it checks against the existing snapshot:</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ npm <span class="hljs-built_in">test</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>&gt; myproject@1.0.0 <span class="hljs-built_in">test</span> /home/matthew/Projects/myproject</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>&gt; jest __test__/ --coverage</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td> PASS  __test__/components/issue.spec.js</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  Issue</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td>    ✓ should render (40ms)</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    ✓ should match the snapshot (12ms)</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>Test Suites: 1 passed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>Tests:       2 passed, 2 total</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>Snapshots:   1 passed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>Time:        3.554s</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>Ran all <span class="hljs-built_in">test</span> suites matching <span class="hljs-string">"__test__/"</span>.</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>File                                                       |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>All files                                                  |    96.15 |       50 |      100 |       96 |                |</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td> root                                                      |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>  unknown                                                  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td> root/home/matthew/Projects/myproject/__test__/components  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td>  issue.spec.js                                            |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td> root/home/matthew/Projects/myproject/src/components       |    94.44 |       50 |      100 |    94.12 |                |</td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td>  Issue.vue                                                |    94.44 |       50 |      100 |    94.12 |             39 |</td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr></table></code></pre><p>Great stuff. Now, if we make a minor change to our component, such as changing the text from <code>An Issue</code> to <code>My Issue</code>, does it pick that up?</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ npm <span class="hljs-built_in">test</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>&gt; myproject@1.0.0 <span class="hljs-built_in">test</span> /home/matthew/Projects/myproject</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>&gt; jest __test__/ --coverage</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td> FAIL  __test__/components/issue.spec.js (5.252s)</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  ● Issue › should render</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    expect(received).toEqual(expected)</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>    Expected value to equal:</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>      <span class="hljs-string">"An Issue"</span></td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>    Received:</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>      <span class="hljs-string">"My Issue"</span></td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>      at Object.&lt;anonymous&gt; (__test__/components/issue.spec.js:9:52)</td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>      at Promise.resolve.then.el (node_modules/p-map/index.js:42:16)</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>  ● Issue › should match the snapshot</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>    expect(value).toMatchSnapshot()</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td>    Received value does not match stored snapshot 1.</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td>    - Snapshot</td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>    + Received</td></tr><tr><td class="linenos" data-pseudo-content="27"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="28"></td><td>     &lt;div&gt;</td></tr><tr><td class="linenos" data-pseudo-content="29"></td><td>       &lt;h1&gt;</td></tr><tr><td class="linenos" data-pseudo-content="30"></td><td>    -    An Issue</td></tr><tr><td class="linenos" data-pseudo-content="31"></td><td>    +    My Issue</td></tr><tr><td class="linenos" data-pseudo-content="32"></td><td>       &lt;/h1&gt;</td></tr><tr><td class="linenos" data-pseudo-content="33"></td><td>     &lt;/div&gt;</td></tr><tr><td class="linenos" data-pseudo-content="34"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="35"></td><td>      at Object.&lt;anonymous&gt; (__test__/components/issue.spec.js:13:20)</td></tr><tr><td class="linenos" data-pseudo-content="36"></td><td>      at Promise.resolve.then.el (node_modules/p-map/index.js:42:16)</td></tr><tr><td class="linenos" data-pseudo-content="37"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="38"></td><td>  Issue</td></tr><tr><td class="linenos" data-pseudo-content="39"></td><td>    ✕ should render (48ms)</td></tr><tr><td class="linenos" data-pseudo-content="40"></td><td>    ✕ should match the snapshot (25ms)</td></tr><tr><td class="linenos" data-pseudo-content="41"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="42"></td><td>Snapshot Summary</td></tr><tr><td class="linenos" data-pseudo-content="43"></td><td> › 1 snapshot <span class="hljs-built_in">test</span> failed <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite. Inspect your code changes or run with `npm <span class="hljs-built_in">test</span> -- -u` to update them.</td></tr><tr><td class="linenos" data-pseudo-content="44"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="45"></td><td>Test Suites: 1 failed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="46"></td><td>Tests:       2 failed, 2 total</td></tr><tr><td class="linenos" data-pseudo-content="47"></td><td>Snapshots:   1 failed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="48"></td><td>Time:        7.082s</td></tr><tr><td class="linenos" data-pseudo-content="49"></td><td>Ran all <span class="hljs-built_in">test</span> suites matching <span class="hljs-string">"__test__/"</span>.</td></tr><tr><td class="linenos" data-pseudo-content="50"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="51"></td><td>File                                                       |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |</td></tr><tr><td class="linenos" data-pseudo-content="52"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="53"></td><td>All files                                                  |    96.15 |       50 |      100 |       96 |                |</td></tr><tr><td class="linenos" data-pseudo-content="54"></td><td> root                                                      |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="55"></td><td>  unknown                                                  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="56"></td><td> root/home/matthew/Projects/myproject/__test__/components  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="57"></td><td>  issue.spec.js                                            |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="58"></td><td> root/home/matthew/Projects/myproject/src/components       |    94.44 |       50 |      100 |    94.12 |                |</td></tr><tr><td class="linenos" data-pseudo-content="59"></td><td>  Issue.vue                                                |    94.44 |       50 |      100 |    94.12 |             39 |</td></tr><tr><td class="linenos" data-pseudo-content="60"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr></table></code></pre><p>Yes, we can see that it’s picked up on the change and thrown an error. Note this line:</p><pre><code class="hljs lang-bash singleline"> › 1 snapshot <span class="hljs-built_in">test</span> failed <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite. Inspect your code changes or run with `npm <span class="hljs-built_in">test</span> -- -u` to update them.</code></pre><p>Jest is telling us that our snapshot has changed, but if we expect that, we can just run <code>npm test -- -u</code> to replace the existing one with our new one. Then, our tests will pass again.</p><p>Now, this component is pretty useless. It doesn’t accept any external input whatsoever, so the response is always going to be the same. How do we test a more dynamic component? Amend the component to look like this:</p><pre><code class="hljs lang-html"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><span class="hljs-template-variable">{{ issue.name }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span></td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span></td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>  <span class="hljs-attr">props</span>: {</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td>    <span class="hljs-attr">issue</span>: <span class="hljs-built_in">Object</span></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>  },</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>  data () {</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>    <span class="hljs-keyword">return</span> {}</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>  }</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>}</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="undefined"></span></td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></td></tr></table></code></pre><p>We’re now passing the <code>issue</code> object into our component as a prop, and getting the name from that. That will break our test, so we need to amend it to pass through the props:</p><pre><code class="hljs lang-javascript"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-keyword">import</span> Issue <span class="hljs-keyword">from</span> <span class="hljs-string">'../../src/components/Issue.vue'</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-keyword">const</span> Constructor = Vue.extend(Issue)</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td><span class="hljs-keyword">const</span> issue = {</td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td>  <span class="hljs-attr">name</span>: <span class="hljs-string">'My Issue'</span></td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>}</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Constructor({</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>  <span class="hljs-attr">propsData</span>: { <span class="hljs-attr">issue</span>: issue }</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td>}).$mount()</td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td>describe(<span class="hljs-string">'Issue'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>  it(<span class="hljs-string">'should render'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>    expect(vm.$el.querySelector(<span class="hljs-string">'h1'</span>).textContent).toEqual(<span class="hljs-string">'My Issue'</span>)</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>  });</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>  it(<span class="hljs-string">'should match the snapshot'</span>, () =&gt; {</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>    expect(vm.$el).toMatchSnapshot()</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>  });</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td>});</td></tr></table></code></pre><p>Here we pass our prop into the constructor for the component. Now, let’s run the tests again:</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ npm <span class="hljs-built_in">test</span></td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>&gt; myproject@1.0.0 <span class="hljs-built_in">test</span> /home/matthew/Projects/myproject</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>&gt; jest __test__/ --coverage</td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td> FAIL  __test__/components/issue.spec.js</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  ● Issue › should match the snapshot</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    expect(value).toMatchSnapshot()</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>    Received value does not match stored snapshot 1.</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td>    - Snapshot</td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>    + Received</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>     &lt;div&gt;</td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>       &lt;h1&gt;</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>    -    An Issue</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>    +    My Issue</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td>       &lt;/h1&gt;</td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>     &lt;/div&gt;</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td>      at Object.&lt;anonymous&gt; (__test__/components/issue.spec.js:18:20)</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td>      at Promise.resolve.then.el (node_modules/p-map/index.js:42:16)</td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>  Issue</td></tr><tr><td class="linenos" data-pseudo-content="27"></td><td>    ✓ should render (39ms)</td></tr><tr><td class="linenos" data-pseudo-content="28"></td><td>    ✕ should match the snapshot (25ms)</td></tr><tr><td class="linenos" data-pseudo-content="29"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="30"></td><td>Snapshot Summary</td></tr><tr><td class="linenos" data-pseudo-content="31"></td><td> › 1 snapshot <span class="hljs-built_in">test</span> failed <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite. Inspect your code changes or run with `npm <span class="hljs-built_in">test</span> -- -u` to update them.</td></tr><tr><td class="linenos" data-pseudo-content="32"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="33"></td><td>Test Suites: 1 failed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="34"></td><td>Tests:       1 failed, 1 passed, 2 total</td></tr><tr><td class="linenos" data-pseudo-content="35"></td><td>Snapshots:   1 failed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="36"></td><td>Time:        3.717s</td></tr><tr><td class="linenos" data-pseudo-content="37"></td><td>Ran all <span class="hljs-built_in">test</span> suites matching <span class="hljs-string">"__test__/"</span>.</td></tr><tr><td class="linenos" data-pseudo-content="38"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="39"></td><td>File                                                       |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |</td></tr><tr><td class="linenos" data-pseudo-content="40"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="41"></td><td>All files                                                  |     96.3 |       50 |      100 |    96.15 |                |</td></tr><tr><td class="linenos" data-pseudo-content="42"></td><td> root                                                      |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="43"></td><td>  unknown                                                  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="44"></td><td> root/home/matthew/Projects/myproject/__test__/components  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="45"></td><td>  issue.spec.js                                            |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="46"></td><td> root/home/matthew/Projects/myproject/src/components       |    94.44 |       50 |      100 |    94.12 |                |</td></tr><tr><td class="linenos" data-pseudo-content="47"></td><td>  Issue.vue                                                |    94.44 |       50 |      100 |    94.12 |             39 |</td></tr><tr><td class="linenos" data-pseudo-content="48"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr></table></code></pre><p>Jest has picked up on our changes and thrown an error. However, because we know the UI has changed, we’re happy with this situation, so we can tell Jest to replace the prior snapshot with <code>npm test -- -u</code> as mentioned earlier:</p><pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ npm <span class="hljs-built_in">test</span> -- -u</td></tr><tr><td class="linenos" data-pseudo-content="2"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="3"></td><td>&gt; myproject@1.0.0 <span class="hljs-built_in">test</span> /home/matthew/Projects/myproject</td></tr><tr><td class="linenos" data-pseudo-content="4"></td><td>&gt; jest __test__/ --coverage <span class="hljs-string">"-u"</span></td></tr><tr><td class="linenos" data-pseudo-content="5"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="6"></td><td> PASS  __test__/components/issue.spec.js</td></tr><tr><td class="linenos" data-pseudo-content="7"></td><td>  Issue</td></tr><tr><td class="linenos" data-pseudo-content="8"></td><td>    ✓ should render (39ms)</td></tr><tr><td class="linenos" data-pseudo-content="9"></td><td>    ✓ should match the snapshot (14ms)</td></tr><tr><td class="linenos" data-pseudo-content="10"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="11"></td><td>Snapshot Summary</td></tr><tr><td class="linenos" data-pseudo-content="12"></td><td> › 1 snapshot updated <span class="hljs-keyword">in</span> 1 <span class="hljs-built_in">test</span> suite.</td></tr><tr><td class="linenos" data-pseudo-content="13"></td><td></td></tr><tr><td class="linenos" data-pseudo-content="14"></td><td>Test Suites: 1 passed, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="15"></td><td>Tests:       2 passed, 2 total</td></tr><tr><td class="linenos" data-pseudo-content="16"></td><td>Snapshots:   1 updated, 1 total</td></tr><tr><td class="linenos" data-pseudo-content="17"></td><td>Time:        3.668s</td></tr><tr><td class="linenos" data-pseudo-content="18"></td><td>Ran all <span class="hljs-built_in">test</span> suites matching <span class="hljs-string">"__test__/"</span>.</td></tr><tr><td class="linenos" data-pseudo-content="19"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="20"></td><td>File                                                       |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |</td></tr><tr><td class="linenos" data-pseudo-content="21"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr><tr><td class="linenos" data-pseudo-content="22"></td><td>All files                                                  |     96.3 |       50 |      100 |    96.15 |                |</td></tr><tr><td class="linenos" data-pseudo-content="23"></td><td> root                                                      |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="24"></td><td>  unknown                                                  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="25"></td><td> root/home/matthew/Projects/myproject/__test__/components  |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="26"></td><td>  issue.spec.js                                            |      100 |      100 |      100 |      100 |                |</td></tr><tr><td class="linenos" data-pseudo-content="27"></td><td> root/home/matthew/Projects/myproject/src/components       |    94.44 |       50 |      100 |    94.12 |                |</td></tr><tr><td class="linenos" data-pseudo-content="28"></td><td>  Issue.vue                                                |    94.44 |       50 |      100 |    94.12 |             39 |</td></tr><tr><td class="linenos" data-pseudo-content="29"></td><td>-----------------------------------------------------------|----------|----------|----------|----------|----------------|</td></tr></table></code></pre><p>Great, we now have a passing test suite again! That’s all we need to make sure that any regressions in the generated HTML of a component get caught.</p><p>Of course, this won’t help with the actual functionality of the component. However, Jest is pretty easy to use to write tests for the actual functionality of the application. If you prefer another testing framework, it’s possible to do the same with them, although I will leave setting them up as an exercise for the reader.</p><ul class="categorylist"><li><a href="/blog/categories/vue/">vue</a></li><li><a href="/blog/categories/jest/">jest</a></li><li><a href="/blog/categories/testing/">testing</a></li><li><a href="/blog/categories/javascript/">javascript</a></li><li><a href="/blog/categories/tdd/">tdd</a></li></ul><div class="addthis_sharing_toolbox"></div><section class="comments"><div id="disqus_thread"></div><script>var disqus_config = function () {
                        this.page.url = "https://matthewdaly.co.uk/blog/2017/06/17/snapshot-test-your-vue-components-with-jest/";
                        this.page.identifier = "https://matthewdaly.co.uk/blog/2017/06/17/snapshot-test-your-vue-components-with-jest/";
                     };
                  (function() { // DON'T EDIT BELOW THIS LINE
                     var d = document, s = d.createElement('script');
                     s.src = 'https://matthewdaly.disqus.com/embed.js';
                     s.setAttribute('data-timestamp', +new Date());
                     (d.head || d.body).appendChild(s);
                  })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></section></article></div><div class="col-md-4"><h1>Recent Posts</h1><p><a href="/blog/2018/01/12/creating-a-caching-user-provider-for-laravel/">Creating a Caching User Provider for Laravel</a></p><p><a href="/blog/2018/01/10/adding-opensearch-support-to-your-site/">Adding Opensearch Support to Your Site</a></p><p><a href="/blog/2018/01/10/easy-repositories-and-decorators-with-laravel-repositories/">Easy Repositories and Decorators With Laravel Repositories</a></p><p><a href="/blog/2018/01/09/creating-laravel-helpers/">Creating Laravel Helpers</a></p><p><a href="/blog/2018/01/08/getting-the-type-of-an-unsupported-postgres-field-in-laravel/">Getting the Type of An Unsupported Postgres Field in Laravel</a></p><section><h2>About me</h2><p>I'm a web and mobile app developer based in Norfolk. My skillset includes Python, PHP and Javascript, and I have extensive experience working with CodeIgniter, Laravel, Django, Phonegap and Angular.js.</p></section><section id="links"><h2>Links</h2><a href="https://github.com/matthewbdaly" rel="me">GitHub</a> <a href="https://twitter.com/MattBD" rel="me">Twitter</a> <a href="http://stackoverflow.com/users/63717/matthew-daly">Stack Overflow</a></section></div></div><div class="row"><div class="col-md-12"><ul class="pager"><li><a href="/blog/2017/03/15/enforcing-a-coding-standard-with-php-codesniffer/"><span class="glyphicon glyphicon-chevron-left"></span> Enforcing a Coding Standard With PHP Codesniffer</a></li><li><a href="/blog/2017/08/14/profiling-your-laravel-application-with-clockwork/">Profiling Your Laravel Application With Clockwork <span class="glyphicon glyphicon-chevron-right"></span></a></li></ul></div></div></div><footer><div class="container footercontainer"><div class="col-md-12"><p class="copyright">Copyright &copy; Matthew Daly 2018.</p></div></div></footer><script type="text/javascript" src="/static/js/all.min.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-17043630-1');ga('send','pageview');</script><script id="dsq-count-scr" src="//matthewdaly.disqus.com/count.js" async></script></body></html>