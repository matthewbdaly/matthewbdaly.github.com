<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>docker | Matthew Daly&apos;s Blog</title>
        <link>https://matthewdaly.co.uk/blog/categories/docker/</link>
        <description>docker | I&apos;m a web developer in Norfolk. This is my blog...</description>
        <lastBuildDate>Fri, 07 Dec 2018 12:13:50 GMT</lastBuildDate>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <generator>grunt-blogbuilder https://github.com/matthewbdaly/grunt-blogbuilder</generator>
        <copyright>Matthew Daly 2018</copyright>
        <item>
            <title><![CDATA[Using Lando as an alternative to Vagrant]]></title>
            <link>https://matthewdaly.co.uk/blog/2018/02/04/using-lando-as-an-alternative-to-vagrant/</link>
            <guid>https://matthewdaly.co.uk/blog/2018/02/04/using-lando-as-an-alternative-to-vagrant/</guid>
            <pubDate>Sun, 04 Feb 2018 00:12:16 GMT</pubDate>
            <description><![CDATA[<p>Although Vagrant is very useful for ensuring consistency between development environments, it’s quite demanding on system resources. Running a virtual machine introduces quite a bit of overhead, and it can be troublesome to provision.</p>
<p>This week I was introduced to <a href="https://docs.devwithlando.io/">Lando</a> as an alternative to Vagrant. Rather than running a virtual machine like Vagrant does by default, Lando instead spins up Docker containers for the services you need, meaning it has considerably less overhead than Vagrant. It also includes presets for a number of frameworks and CMS’s, including:</p>
<ul>
<li>Drupal 7</li>
<li>Drupal 8</li>
<li>Wordpress</li>
<li>Laravel</li>
</ul>
<p>Considering that Vagrant needs quite a bit of boilerplate to set up the server for different types of projects, this gives Lando an obvious advantage. The only issue I’ve had with it is that it’s been unreliable when I’ve had to use it on Windows, which I don’t do much anyway.</p>
<h2 id="getting-started">Getting started</h2>
<p>Lando requires that you have Docker installed. Once that’s done you can download and install it fro the website. Then you can run <code>lando init</code> to set it up:</p>
<pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ lando init</td><tr><td class="linenos" data-pseudo-content="2"></td><td>? What recipe <span class="hljs-keyword">do</span> you want to use? wordpress</td><tr><td class="linenos" data-pseudo-content="3"></td><td>? Where is your webroot relative to the init destination? .</td><tr><td class="linenos" data-pseudo-content="4"></td><td>? What <span class="hljs-keyword">do</span> you want to call this app? wp-site</td><tr><td class="linenos" data-pseudo-content="5"></td><td></td><tr><td class="linenos" data-pseudo-content="6"></td><td>NOW WE<span class="hljs-string">'RE COOKING WITH FIRE!!!</td><tr><td class="linenos" data-pseudo-content="7"></td><td>Your app has been initialized!</td><tr><td class="linenos" data-pseudo-content="8"></td><td></td><tr><td class="linenos" data-pseudo-content="9"></td><td>Go to the directory where your app was initialized and run</td><tr><td class="linenos" data-pseudo-content="10"></td><td>`lando start` to get rolling.</td><tr><td class="linenos" data-pseudo-content="11"></td><td></td><tr><td class="linenos" data-pseudo-content="12"></td><td>Check the LOCATION printed below if you are unsure where to go.</td><tr><td class="linenos" data-pseudo-content="13"></td><td></td><tr><td class="linenos" data-pseudo-content="14"></td><td>Here are some vitals:</td><tr><td class="linenos" data-pseudo-content="15"></td><td></td><tr><td class="linenos" data-pseudo-content="16"></td><td> NAME      wp-site                                               </td><tr><td class="linenos" data-pseudo-content="17"></td><td> LOCATION  /home/matthew/Projects/wp-site                        </td><tr><td class="linenos" data-pseudo-content="18"></td><td> RECIPE    wordpress                                             </td><tr><td class="linenos" data-pseudo-content="19"></td><td> DOCS      https://docs.devwithlando.io/tutorials/wordpress.html </span></td></table></code></pre>
<p>Here I’ve chosen the <code>wordpress</code> recipe, in the current directory, with the name <code>wp-site</code>. This generates the following file as <code>.lando.yml</code>:</p>
<pre><code class="hljs lang-yml"><table><tr><td class="linenos" data-pseudo-content="1"></td><td><span class="hljs-symbol">name:</span> wp-site</td><tr><td class="linenos" data-pseudo-content="2"></td><td><span class="hljs-symbol">recipe:</span> wordpress</td><tr><td class="linenos" data-pseudo-content="3"></td><td><span class="hljs-symbol">config:</span></td><tr><td class="linenos" data-pseudo-content="4"></td><td><span class="hljs-symbol">  webroot:</span> .</td></table></code></pre>
<p>Then, if we run <code>lando start</code>, it will set up the required services:</p>
<pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>$ lando start</td><tr><td class="linenos" data-pseudo-content="2"></td><td>landoproxyhyperion5000gandalfedition_proxy_1 is up-to-date</td><tr><td class="linenos" data-pseudo-content="3"></td><td>Creating network <span class="hljs-string">"wpsite_default"</span> with the default driver</td><tr><td class="linenos" data-pseudo-content="4"></td><td>Creating volume <span class="hljs-string">"wpsite_appserver"</span> with default driver</td><tr><td class="linenos" data-pseudo-content="5"></td><td>Creating volume <span class="hljs-string">"wpsite_data"</span> with default driver</td><tr><td class="linenos" data-pseudo-content="6"></td><td>Creating volume <span class="hljs-string">"wpsite_data_database"</span> with default driver</td><tr><td class="linenos" data-pseudo-content="7"></td><td>Creating wpsite_appserver_1 ... </td><tr><td class="linenos" data-pseudo-content="8"></td><td>Creating wpsite_database_1 ... </td><tr><td class="linenos" data-pseudo-content="9"></td><td>Creating wpsite_database_1</td><tr><td class="linenos" data-pseudo-content="10"></td><td>Creating wpsite_appserver_1 ... <span class="hljs-keyword">done</span></td><tr><td class="linenos" data-pseudo-content="11"></td><td>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</td><tr><td class="linenos" data-pseudo-content="12"></td><td>                                 Dload  Upload   Total   Spent    Left  Speed</td><tr><td class="linenos" data-pseudo-content="13"></td><td>100 4454k  100 4454k    0     0  3288k      0  0:00:01  0:00:01 --:--:-- 3290k</td><tr><td class="linenos" data-pseudo-content="14"></td><td>OS:     Linux 4.13.0-32-generic <span class="hljs-comment">#35-Ubuntu SMP Thu Jan 25 09:13:46 UTC 2018 x86_64</span></td><tr><td class="linenos" data-pseudo-content="15"></td><td>Shell:  </td><tr><td class="linenos" data-pseudo-content="16"></td><td>PHP binary:     /usr/<span class="hljs-built_in">local</span>/bin/php</td><tr><td class="linenos" data-pseudo-content="17"></td><td>PHP version:    7.1.13</td><tr><td class="linenos" data-pseudo-content="18"></td><td>php.ini used:   </td><tr><td class="linenos" data-pseudo-content="19"></td><td>WP-CLI root dir:        phar://wp-cli.phar</td><tr><td class="linenos" data-pseudo-content="20"></td><td>WP-CLI vendor dir:      phar://wp-cli.phar/vendor</td><tr><td class="linenos" data-pseudo-content="21"></td><td>WP_CLI phar path:       /tmp</td><tr><td class="linenos" data-pseudo-content="22"></td><td>WP-CLI packages dir:</td><tr><td class="linenos" data-pseudo-content="23"></td><td>WP-CLI global config:   </td><tr><td class="linenos" data-pseudo-content="24"></td><td>WP-CLI project config:  </td><tr><td class="linenos" data-pseudo-content="25"></td><td>WP-CLI version: 1.5.0</td><tr><td class="linenos" data-pseudo-content="26"></td><td></td><tr><td class="linenos" data-pseudo-content="27"></td><td>BOOMSHAKALAKA!!!</td><tr><td class="linenos" data-pseudo-content="28"></td><td></td><tr><td class="linenos" data-pseudo-content="29"></td><td>Your app has started up correctly.</td><tr><td class="linenos" data-pseudo-content="30"></td><td>Here are some vitals:</td><tr><td class="linenos" data-pseudo-content="31"></td><td></td><tr><td class="linenos" data-pseudo-content="32"></td><td> APPSERVER URLS  https://localhost:32802</td><tr><td class="linenos" data-pseudo-content="33"></td><td>                 http://localhost:32803</td><tr><td class="linenos" data-pseudo-content="34"></td><td>                 http://wp-site.lndo.site</td><tr><td class="linenos" data-pseudo-content="35"></td><td>                 https://wp-site.lndo.site</td><tr><td class="linenos" data-pseudo-content="36"></td><td></td></table></code></pre>
<p>Note the <code>APPSERVER URLS</code> section - the site can be accessed locally via HTTP or HTTPS. For this recipe, it also installs WP CLI.</p>
<p>If we run <code>docker ps</code>, we can see that it’s running three Docker containers:</p>
<pre><code class="hljs lang-bash"><table><tr><td class="linenos" data-pseudo-content="1"></td><td>CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                                                               NAMES</td><tr><td class="linenos" data-pseudo-content="2"></td><td>2e920e152091        devwithlando/php:7.1-apache   <span class="hljs-string">"/lando-entrypoint.s…"</span>   16 minutes ago      Up 16 minutes       0.0.0.0:32803-&gt;80/tcp, 0.0.0.0:32802-&gt;443/tcp                       wpsite_appserver_1</td><tr><td class="linenos" data-pseudo-content="3"></td><td>82ea60b1214f        mysql:latest                  <span class="hljs-string">"/lando-entrypoint.s…"</span>   16 minutes ago      Up 16 minutes       0.0.0.0:32801-&gt;3306/tcp                                             wpsite_database_1</td><tr><td class="linenos" data-pseudo-content="4"></td><td>e51d831199d7        traefik:1.3-alpine            <span class="hljs-string">"/lando-entrypoint.s…"</span>   About an hour ago   Up About an hour    0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, 0.0.0.0:58086-&gt;8080/tcp   landoproxyhyperion5000gandalfedition_proxy_1</td></table></code></pre>
<p>Apache lives in one container, MySQL in another, while the third runs Traefik, a lightweight load balancer, which listens on port 80. Traefik does the work of redirecting HTTP requests to the right place.</p>
<p>As I’ve been unhappy with the amount of resources Vagrant uses for a while, and I usually run Ubuntu (making using Docker straightforward), I’m planning on using Lando extensively in future. It’s lighter and faster to set up, and has sane defaults for most of the frameworks and CMS’s I use regularly, making it generally quicker and easier to work with.</p>
]]></description>
        </item>
    </channel>
</rss>